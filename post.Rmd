---
title: 'Researcher-level altmetrics paper'
author: "Heather Piwowar and Jason Priem"
output:
  html_document:
    fig_caption: yes
    force_captions: yes
    highlight: pygments
    keep_md: yes
    number_sections: no
    pandoc_args:
    - +RTS
    - -K10000000
    - -RTS
  md_document:
    variant: markdown_github
  pdf_document:
    fig_caption: yes
    keep_md: yes
    keep_tex: yes
    latex_engine: xelatex
---

*We're presenting this paper at the [3:AM conference](http://altmetricsconference.com/schedule/) in Bucharest, 28-29 Sept 2016. Once it's a bit more polished we plan to upload it to the ArXiv. It's very much a work in progress; feel free to submit pull requests with updates and changes.*

```{r setup, echo=FALSE}
library(knitr)
opts_knit$set(progress=TRUE, tidy=TRUE, echo=TRUE)
```

```{r knitcitations, echo=FALSE}
  # devtools::install_github("cboettig/knitcitations@v1")
  library(knitcitations); cleanbib()
  cite_options(citation_format = "pandoc", check.entries=FALSE)
  library(bibtex)
```

```{r load_libraries, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
library(magrittr)
library(ggplot2)
library(dplyr)
library(broom)
library(RJDBC)
library(reshape)
library(plyr); library(dplyr)
library(scales)
library(corrplot)
```

```{r get_data, echo=FALSE, results='hide', cache=TRUE}

profiles <- read.csv("profiles.csv")
```

## researcher-level altmetrics

* This section still needs its citations...*
 
There's been a lot of work examining the distribution and properties of altmetrics at the level of individual papers, and sensibly so. Since this is the lowest level of aggregation, it's a great place to start. Researchers have also looked at altmetrics by journal, following a long trend of journal-level citation bibliometrics work. However, there's surprisingly little work on altmetrics at the *researcher* level. 

And the researcher level matters. Researchers decide what to study, where to publish, and how to publish it. And they are exceedingly aware of impact metrics, and the massive affect of these metrics on their careers. So, effective and meaningful researcher-level altmetrics could powerfully impact scholarly communication.

Of course, altmetrics will take some time to become effective and meaningful. But in the meantime, it's useful to examine the distribution and character of researcher-level altmetrics, to test the potential of these metrics for real evaluation. 


## ORCID as a source for researcher-level altmetrics 
Finding data at the reseacher level is not simple, since many commercial researcher databases like Google Scholar (shamefully) prohibit systematic analysis of their data. However, the growth of the ORCID ID system gives us an opportunity to study and open dataset of scholars and their publications. And the [2015 ORCID public data file](https://figshare.com/articles/ORCID_Public_Data_File_2015/1582705) is available for download and re-use.

Using ORCID profiles does have some difficulties. Unlike systems such as Google Scholar, ORCID does not automatically add a users' publications. It must be done manually, and it is not a particularly user-friendly process. Because of this, most ORCIDs do not include a complete publication list. This is particularly true since most  ORCIDs are created as part of a single-signon flow for another system (an academic version of the ubiquitous "sign in with Facebook" button). These users just want an account, and have no interest in making a complete publication list.

We solved this problem by using clues in ORCID records to find users who have spent significant amounts of time editing their profiles, on the assumption that these users are likely to have assembled a relatively complete publication list. After trying several different clues, we settled on two: users were more likely to have complete publications list if they 
1. Had at least one publication with a DOI from 2015 and
2. Had added a custom URL to their homepage.

This significantly narrowed our sample from the 2015 public data file, from 1.6M to 17k:

| Total ORCID accounts          | 1.6M |
|-------------------------------|------|
| With DOIs                     | 215k |
| With 2015 DOIs                | 62k  |
| With 2015 DOIs and custom URL | 17k  |

## How much altmetrics activity to these researchers have?







how prevelant are different kinds of success for each person (by metric)
```{r}
# by metric
number_of_people = nrow(profiles)
channels = profiles %>% select(blogs:wikipedia) %>% melt
nonzero_channels =  channels %>% filter(value>1)

nonzero_channels %>% ggplot( aes(reorder(variable, variable, length)) ) +
  geom_bar(aes(y=..count../6583)) +
  coord_flip() +
  scale_y_continuous(labels = percent) +
  ggtitle("Percentage people with research mentioned on a given channel \n(people with at least 20 mentions)") +
  ylab("Percentage of people") +
  xlab("Channel")
```

how prevelant are different kinds of success for each person (overall)
```{r}
# number of sources
profiles %>% ggplot( aes(num_sources) ) + geom_histogram(binwidth=1)
profiles %>% ggplot( aes(num_sources) ) + geom_histogram(binwidth=1, aes(y=cumsum(..count..)))

# number of posts
profiles %>% ggplot( aes(posts) ) + geom_histogram()
profiles %>% ggplot( aes(posts) ) + geom_histogram() + scale_x_log10() 
profiles$posts %>% median

# altmetric scores
profiles %>% ggplot( aes(altmetric_score) ) + geom_histogram()
profiles %>% ggplot( aes(altmetric_score) ) + geom_histogram() + scale_x_log10() 
profiles$altmetric_score %>% median

# altmetric scores, zoom in on the meat
profiles %>% filter(altmetric_score < 250) %>% ggplot( aes(altmetric_score) ) + geom_histogram()

# activity, as defined by having stuff in each of the last three months
profiles %>% filter(monthly_event_count < 30) %>% ggplot( aes(monthly_event_count) ) + geom_histogram(binwidth=1)
profiles %>% filter(monthly_event_count < 30) %>% ggplot( aes(monthly_event_count) ) + geom_histogram(binwidth=1, aes(y=cumsum(..count..)))

# how many have monthly events at all
profiles %>% filter(monthly_event_count > 0) %>% nrow
profiles %>% filter(monthly_event_count == 0) %>% nrow

```





lets see how counts various metrics relate to one another

First, the number of sources vs the number of posts
```{r}
head(profiles)

# sources vs posts
profiles %>%  ggplot(aes(num_sources, posts))  + geom_jitter(alpha=0.5) 
cor(profiles$num_sources, profiles$posts)
cor(profiles$num_sources, log10(profiles$posts))
```
* moderate correlation goes up noticebly when you log-transform posts


Let's look at the relationship between the altmetric score vs posts/tweets
```{r}

# altmetric score vs posts
profiles %>%  ggplot(aes(posts, altmetric_score))  + geom_point(alpha=.2) + scale_x_log10() + scale_y_log10()
cor(log10(profiles$altmetric_score), log10(profiles$posts), use='complete.obs')
cor(profiles$altmetric_score, profiles$posts, use='complete.obs')  # makes no difference


# altmetric score vs twitter
profiles %>%  ggplot(aes(twitter, altmetric_score))  + geom_point(alpha=0.2) + scale_x_log10() + scale_y_log10()
cor(log10(profiles$altmetric_score), log10(profiles$twitter))

```

* correlations really strong, only a bit less strong when you use tweets instead of posts.


Lets take a look at the t-index
```{r}

# altmetric score vs t-index
profiles %>% ggplot( aes(t_index) ) + geom_histogram(binwidth=1, aes(y=cumsum(..count..)))
profiles$t_index %>% median


profiles %>%  ggplot(aes(t_index, altmetric_score))  + geom_jitter(alpha=0.2) + scale_x_log10() + scale_y_log10() 

cor(profiles$altmetric_score, profiles$t_index)
cor(log10(profiles$altmetric_score), log10(profiles$t_index))

```

* everything above 800 on the graph is the top 5%, which is convenient for estimating. so t-index=12 is the top 5 percentile.
* the median of 4 suggests that we could maybe do a badge for everyone who's got a 5 or better.
* surprisingly good correlation between t-index and both altmetric score and posts count, even after log-transform





